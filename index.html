<!doctype html>
<html>
    <head>
        <!-- Change this if you want to allow scaling -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"> 
        <meta http-equiv="Content-type" content="text/html; charset=utf-8">
	<link rel="stylesheet" href="assets/css/master.css" type="text/css" media="screen" />
	<title>My Time Tracker Pro</title>
	<script src="cordova.js" type="text/javascript" charset="utf-8" ></script>
	<script src="childbrowser.js" type="text/javascript" charset="utf-8"></script>
	<script src="assets/js/xui.js" type="text/javascript" charset="utf-8"></script>
	<script src="assets/js/dsl.js" type="text/javascript" charset="utf-8"></script>
	<script src="assets/js/app.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript" charset="utf-8">
		
		

	function onLocationChange(func, time) {
	if(!time) time = 500;
	var currLoc = '';
	setInterval(function() {
		if(document.getElementById("frame1").contentDocument.location.href  != currLoc)
		{
		    currLoc = document.getElementById("frame1").contentDocument.location.href ;
		    func(); //execute function
		}
		}, time);
	}
 
	function openExternal(url)
	{  
		x$('#frame1').css({ display : 'none' });
		x$('#wait').css({ display : 'block' });
		x$( "#frame1" ).attr('src', url);
		x$( "#main" ).before( "<a id='linkhandler'  target='frame1'>" );
		var link = x$('#linkhandler')[0];
		link.href = url; 
		var clickevent = document.createEvent("UIEvents"); 
		clickevent.initEvent('click', true, true); 
		link.dispatchEvent(clickevent);
		onLocationChange(locationChanged,300);
	}

	function locationChanged() {
		x$('#frame1').css({ display : 'block' });
		x$('#wait').css({ display : 'none' });
	}


	</script>
    </head>
    <body>
 		<div id="title_bar">My Time Tracker Pro</div>
		<div id="main" class="view">
			<iframe class="frame" id="frame1" name="frame1" frameborder="1" marginheight="0" marginwidth="0" width="100%" height="100%" scrolling="auto"></iframe>
		</div>
		<div class="waitBox rounded-corners" id="wait">Please wait..</div>
		
		<script>openExternal('http://myttpro.com',{ showLocationBar: false, showNavigationBar: false, showAddress: false});     </script>
	</body>
</html>